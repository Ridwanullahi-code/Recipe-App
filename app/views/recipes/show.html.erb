<div class="container">
  <h2 class="recipe"><%= @recipe.name %></h2>
  <h3 class="recipe-specs">Preparation time: <%= @recipe.preparation_time%> min(s)</h3>
  <div class="public">
    <% if @recipe.public %>
      <p>Public <i class="fa-solid fa-toggle-on"></i></p>
    <% elsif !@recipe.public %>
      <p class="public-p"><%= @recipe.public %><i class="fa-solid fa-toggle-off"></i></p>
    <% end %>
  </div>
  <h3 class="recipe-specs">Cooking time: <%= @recipe.cooking_time %> min(s)</h3>
  <h3 class="recipe-specs">Step by Step Description </h3>
  <p><%= @recipe.description %></p>
  <section class="containerz px-5 mt-5">
  <div class="col-md-6 offset-md-10 py-1">
   <div class="w-full bg-white rounded p-4 flex flex-row justify-between leading-normal gap-2">
      <% if user_signed_in? %>
        <button type="" class="" @click="open = true">Generate Shopping List</button>
      <% end %>
      <% if @recipe.user == @current_user %>
        <%= link_to "Add Ingredients", new_recipe_recipe_food_path(@recipe.id), class: "flex bg-transparent hover:bg-lime-500 text-lime-700 justify-center text-center font-semibold hover:text-white p-1 px-4 border border-lime-500 hover:border-transparent rounded"%>
      <% end %>
    </div>
  </div>


<table class="w-full text-sm rounded">
        <thead class="text-white">
          <tr class="bg-teal-700">
            <th class="px-4 w-5/12 py-2">Food</th>
            <th class="px-4 w-2/12 py-2">Quantity</th>
            <th class="px-4 w-2/12 py-2">Value</th>
            <% if @recipe.user == current_user %>
              <th class="px-4 w-3/12 py-2">Action</th>
            <% end %>
          </tr>
        </thead>
        <tbody><%= render partial:"recipe_food", collection: @recipe_foods %>
        </table>
        <% if user_signed_in? %>
        <div class="absolute top-0 left-0 flex items-center justify-center w-full h-full" style="background-color: rgba(0,0,0,.5);" x-show="open">
          <div class="border p-7 bg-white rounded" @click.away="open = false">
  <%= form_with url: shopping_list_path, method: :get, local: true, html: {"data-turbo": "false"} do |form| %>
    <div class="flex flex-col gap-7 p-5">
      <h1 class="font-bold text-4xl">New Shopping List</h1>
      <div class="hidden">
        <%= form.label :recipe_id, class: 'font-medium block mb-2' %>
        <%= form.text_field :recipe_id, value: @recipe.id %>
      </div>
      <div>
        <%= form.label :inventory_id, class: 'font-medium block mb-2' %>
        <%= form.select :inventory_id, options_from_collection_for_select(@inventories, "id", "name"), {}, { class: "border rounded" } %>
      </div>
      <%= form.submit "Submit", class: 'flex bg-transparent hover:bg-teal-500 text-teal-700 justify-center font-semibold hover:text-white p-1 px-4 border border-teal-500 hover:border-transparent rounded' %>
    </div>
  <% end %>
</div>
        </div>
      <% end %>
</section>
</div>
